@model Portfolio.Models.ProjectVM
@{
    Layout = "_Layout";
    ViewData["Title"] = (Model?.Title ?? "Projekt") + " – Case";
}

<section id="case" class="section case-hero">
    <div class="container">
        <h3 class="case-title reveal">@Model.Title</h3>

        @if (!string.IsNullOrWhiteSpace(Model?.Summary))
        {
            <p class="case-summary reveal">@Model.Summary</p>
        }

        <div class="case-meta reveal">
            @if (!string.IsNullOrWhiteSpace(Model?.Role))
            {
                <span class="meta-chip"><strong>Roll:</strong> @Model.Role</span>
            }
            @if (!string.IsNullOrWhiteSpace(Model?.Period))
            {
                <span class="meta-chip"><strong>År:</strong> @Model.Period</span>
            }
            @if (Model?.Techs != null && Model.Techs.Any())
            {
                <span class="techs">
                    <strong>Teknik:</strong>
                    @foreach (var t in Model.Techs)
                    {
                        <em>@t</em>
                    }
                </span>
            }
        </div>

        <div class="case-heroMedia reveal">
            @if (!string.IsNullOrWhiteSpace(Model?.HeroImage))
            {
                <figure class="hero-shot tilt">
                    <img src="@Model.HeroImage" alt="@Model.Title" />
                    <span class="glare"></span>
                </figure>
            }
            <canvas id="caseHeroWaves" aria-hidden="true"></canvas>
        </div>

        <div class="case-cta reveal">
            @if (!string.IsNullOrWhiteSpace(Model?.LiveUrl))
            {
                <a href="@Model.LiveUrl" class="btn" target="_blank" rel="noopener">
                    <i class="fa-solid fa-up-right-from-square" aria-hidden="true"></i> Se live
                </a>
            }
            @if (!string.IsNullOrWhiteSpace(Model?.RepoUrl))
            {
                <a href="@Model.RepoUrl" class="btn-outline" target="_blank" rel="noopener">
                    <i class="fa-brands fa-github" aria-hidden="true"></i> Källkod
                </a>
            }
            <a asp-controller="Home" asp-action="Index" class="btn-outline">← Tillbaka</a>
        </div>
    </div>
</section>

@if ((Model?.Bullets != null && Model.Bullets.Any()) || (Model?.Learnings != null && Model.Learnings.Any()))
{
    <section class="section">
        <div class="container two">
            @if (Model?.Bullets != null && Model.Bullets.Any())
            {
                <div class="panel reveal">
                    <h3>Mål & resultat</h3>
                    <ul class="bullets">
                        @foreach (var b in Model.Bullets)
                        {
                            <li>@b</li>
                        }
                    </ul>
                </div>
            }

            @if (Model?.Learnings != null && Model.Learnings.Any())
            {
                <div class="panel reveal">
                    <h3>Lärdomar</h3>
                    <ul class="bullets">
                        @foreach (var l in Model.Learnings)
                        {
                            <li>@l</li>
                        }
                    </ul>
                </div>
            }
        </div>
    </section>
}

@if (Model?.Gallery != null && Model.Gallery.Any())
{
    <section class="section alt">
        <div class="container">
            <h2 class="reveal">Galleri</h2>
            <div class="gallery">
                @foreach (var img in Model.Gallery)
                {
                    <figure class="shot tilt reveal">
                        <img src="@img" alt="@Model.Title" loading="lazy" />
                        <span class="glare"></span>
                    </figure>
                }
            </div>
        </div>
    </section>
}
